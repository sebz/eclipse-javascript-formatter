<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <extension
         point="org.eclipse.ui.commands">
      <command
            name="%formatAsJavascript.name"
            categoryId="org.eclipse.ui.category.edit"
            id="jp.sourceforge.pdt_tools.jsbeautifier.commands.format">
      </command>
      <command
            categoryId="org.eclipse.ui.category.file"
            id="jp.sourceforge.pdt_tools.jsbeautifier.commands.formatFile"
            name="%formatAsJavascript.name">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            commandId="jp.sourceforge.pdt_tools.jsbeautifier.commands.format"
            class="jp.sourceforge.pdt_tools.jsbeautifier.handlers.FormatHandler">
         <enabledWhen>
            <and>
               <reference
                     definitionId="jp.sourceforge.pdt_tools.jsbeautifier.definition">
               </reference>
               <with
                     variable="selection">
                  <test
                        forcePluginActivation="true"
                        property="jp.sourceforge.pdt_tools.jsbeautifier.textSelected"
                        value="true">
                  </test>
               </with>
            </and>
         </enabledWhen>
      </handler>
      <handler
            class="jp.sourceforge.pdt_tools.jsbeautifier.handlers.FormatFileHandler"
            commandId="jp.sourceforge.pdt_tools.jsbeautifier.commands.formatFile">
         <enabledWhen>
            <with
                  variable="selection">
                  <test
                        args="attr"
                        forcePluginActivation="true"
                        property="jp.sourceforge.pdt_tools.jsbeautifier.fileSelected"
                        value="true">
                  </test>
            </with>
         </enabledWhen>
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            locationURI="menu:edit?after=additions">
         <command
               commandId="jp.sourceforge.pdt_tools.jsbeautifier.commands.format"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="jp.sourceforge.pdt_tools.jsbeautifier.definition">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="jp.sourceforge.pdt_tools.jsbeautifier.commands.format"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <reference
                     definitionId="jp.sourceforge.pdt_tools.jsbeautifier.definition">
               </reference>
            </visibleWhen>
         </command>
      </menuContribution>
      <menuContribution
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <command
               commandId="jp.sourceforge.pdt_tools.jsbeautifier.commands.formatFile"
               style="push">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <test
                        forcePluginActivation="true"
                        property="jp.sourceforge.pdt_tools.jsbeautifier.fileSelected"
                        value="true">
                  </test>
               </with>
            </visibleWhen>
         </command>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.core.runtime.preferences">
      <initializer
            class="jp.sourceforge.pdt_tools.jsbeautifier.preferences.PreferenceInitializer">
      </initializer>
   </extension>
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            class="jp.sourceforge.pdt_tools.jsbeautifier.preferences.JSBeautifierPreferencePage"
            id="jp.sourceforge.pdt_tools.jsbeautifier.preferences.PreferencePage"
            name="%preferencePage.name">
      </page>
   </extension>
   <extension
         point="org.eclipse.ui.propertyPages">
      <page
            class="jp.sourceforge.pdt_tools.jsbeautifier.preferences.JSBeautifierPreferencePage"
            id="jp.sourceforge.pdt_tools.jsbeautifier.properties.PropertyPage"
            name="%preferencePage.name">
         <enabledWhen>
            <adapt
                  type="org.eclipse.core.resources.IProject">
               <test
                     forcePluginActivation="true"
                     property="org.eclipse.core.resources.open"
                     value="open">
               </test>
            </adapt>
         </enabledWhen>
      </page>
   </extension>
   <extension
         point="org.eclipse.core.expressions.definitions">
      <definition
            id="jp.sourceforge.pdt_tools.jsbeautifier.definition">
            <with
                  variable="activeContexts">
               <iterate
                     operator="or">
                  <or>
                  <equals
                        value="org.eclipse.ui.textEditorScope">
                  </equals>
                  <equals
                        value="org.eclipse.wst.sse.ui.structuredTextEditorScope">
                  </equals>
                  </or>
               </iterate>
            </with>
      </definition>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="jp.sourceforge.pdt_tools.jsbeautifier.handlers.TextSelectionTester"
            id="jp.sourceforge.pdt_tools.jsbeautifier.textSelectionTester"
            namespace="jp.sourceforge.pdt_tools.jsbeautifier"
            properties="textSelected"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
      <propertyTester
            class="jp.sourceforge.pdt_tools.jsbeautifier.handlers.FileSelectionTester"
            id="jp.sourceforge.pdt_tools.jsbeautifier.fileSelectionTester"
            namespace="jp.sourceforge.pdt_tools.jsbeautifier"
            properties="fileSelected"
            type="org.eclipse.jface.viewers.ISelection">
      </propertyTester>
   </extension>

</plugin>
